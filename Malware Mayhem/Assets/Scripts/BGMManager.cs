using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;
using MoreMountains;
using MoreMountains.Feedbacks;
using MoreMountains.Tools;
using Object = System.Object;

public class BGMManager : MonoBehaviour
{
    MMF_Player _player;
    Scene _scene;
    

    // Start is called before the first frame update
    void Start()
    {
        DontDestroyOnLoad(this.gameObject);
    }
    public void OnEnable () {
        SceneManager.sceneLoaded += OnSceneLoaded;
    }
    void OnSceneLoaded (Scene scene, LoadSceneMode mode) {
        _scene = scene;
        CheckBackgroundMusic();
    }
    
    void OnDisable () {
        SceneManager.sceneLoaded -= OnSceneLoaded;
    }

    public void CheckBackgroundMusic()
    {
        switch (_scene.name)
        {
            case "stage1":
            case "stage2":
                _player = GameObject.Find("Stage1-2BGM").GetComponent<MMF_Player>();
                break;
            case "stage3":
            case "bossStage":
                _player = GameObject.Find("Stage3BGM").GetComponent<MMF_Player>();
                break;
            case "Main Menu":
                _player = GameObject.Find("MainMenuBGM").GetComponent<MMF_Player>();
                break;
            default:
                _player = GameObject.Find("MainMenuBGM").GetComponent<MMF_Player>();
                break;
        }
        
        _player.PlayFeedbacks();
        Debug.Log("BGM Player = " + _player);
    }
}
